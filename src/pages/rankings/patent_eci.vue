<script setup lang="ts">
import VChart from 'vue-echarts'
import _ from 'lodash'

import type { EChartsCoreOption } from 'echarts/core'
import { registerMap, use } from 'echarts/core'
import {
  LineChart,
  MapChart,
} from 'echarts/charts'
import { SVGRenderer } from 'echarts/renderers'
import {
  DatasetComponent,
  GeoComponent,
  GridComponent,
  LegendComponent,
  TimelineComponent,
  TitleComponent,
  TooltipComponent,
  VisualMapComponent,
} from 'echarts/components'

import worldMap from '~/asset/world.json'
import countryName from '~/asset/countryName.json'

const { t } = useI18n()
// generate alpha-2 : name
const countryNameMap = new Map<string, string>()
countryName.forEach((row) => {
  countryNameMap.set(row['alpha-2'], row.name)
})

use([
  SVGRenderer,
  LineChart,
  TitleComponent,
  TimelineComponent,
  GridComponent,
  DatasetComponent,
  TooltipComponent,
  LegendComponent,
  GeoComponent,
  VisualMapComponent,
  MapChart,
])

registerMap('world', (worldMap as any))

const chartData = ref({ data: [[518.9641016979875, 522.4080260974088, 527.1058083064278, 548.5695084611757, 572.3155279393976, 595.8770988697287, 598.1335474510109, 605.0282960160895, 638.9094182837069, 647.845054310853, 663.782058475586, 698.293248288938, 714.3832202925918, 762.51788685501, 785.8780182238947, 829.9511579468088, 900.4352175959342, 908.6238952263252, 941.7269779320239, 930.3393796318117, 903.4659616117705, 891.7717352788774, 882.6916342683859, 906.4508260509701, 888.0858879022617, 909.9031116840107, 924.3786900343905, 885.4822849857668, 865.9131292542561, 839.4581227258174, 757.1442047955735, 691.2197847629385, 550.3487727408285], [484.78879596933433, 482.87893740166624, 485.5213952359137, 486.3976913861122, 489.77777347730535, 490.00483266581915, 490.43316654443, 490.2402412826444, 485.7015671332442, 481.0695820845864, 482.4539082399562, 483.0980209437279, 481.0756178709019, 479.8428410458925, 481.99200433861444, 483.4891903247516, 487.5592814840594, 486.46443473711855, 488.51877729806637, 491.0362370350612, 489.8036163760248, 485.8320373984338, 487.4401041864254, 490.3471827115518, 489.8220413806463, 491.0334028592538, 494.32105582039, 489.71619017256666, 488.04603102842105, 483.57598618937755, 475.18297740395906, 466.8200592276672, 437.8576062334825], [484.4854895904218, 483.4704650545114, 482.8508388302554, 486.45049670382275, 490.3200332354636, 492.0955887013705, 490.82529303347985, 487.8566052905771, 485.01320125115757, 483.5506623485762, 483.9214865399302, 482.1525466247448, 483.8365680782451, 485.4946427239718, 488.65137290805814, 487.1167400034542, 496.13189261758345, 496.73902939284, 498.24346530815944, 506.03347790345777, 498.3135339226104, 495.13338826313907, 493.8481167082271, 497.4324224687989, 498.50008967511246, 500.7076050520237, 501.6879288172344, 494.07109552833816, 493.634668539018, 489.7940975169459, 479.05438032186555, 470.4358316360181, 444.1548416240505], [483.63166245284003, 481.1840146291867, 481.81621175087867, 485.37817685780095, 488.63125451856183, 489.4522494409103, 491.25394875698464, 489.86416967275835, 484.1515530250096, 483.48943244321424, 482.35003048603954, 481.34303799503385, 483.4070860267353, 482.4653967521283, 482.81441198087975, 485.18142009103775, 491.06153702638824, 491.51684580972216, 492.76494005517554, 499.17293250980356, 494.83277706958347, 494.721863824523, 494.1118846234766, 494.20440806212156, 494.49144743301014, 498.79234984818174, 497.6921036518418, 491.50569756706324, 490.99182406897523, 488.3310542680306, 481.3366263294627, 472.0820699169058, 442.6888400423144], [479.71329739959225, 481.48303896170665, 480.10199070394225, 479.33321370010543, 484.45789718383423, 483.76924974339227, 482.9031512418965, 482.3248317772551, 476.94579487579836, 472.0279515180365, 474.11720128300567, 480.8232890582931, 472.109485388038, 470.32236368083306, 471.2607116433099, 474.61820415287565, 485.10681968965355, 479.088208282405, 484.0768594339918, 486.94939699019324, 492.31424211751954, 488.802098529432, 483.9900610687357, 485.97495707431625, 489.4141638997487, 492.958560788123, 492.89320678832155, 488.79392089920225, 482.81356323249616, 483.5503818525257, 475.1410156505489, 459.89063583511734, 428.68472459662274], [470.73160672132974, 469.4858664143897, 471.5321988383527, 478.23773957546933, 478.74497441002535, 479.93975621265827, 479.0903773768366, 482.44432309125136, 478.8820632016547, 474.94016719187124, 476.4370714140751, 477.56222462234626, 478.5087200746939, 480.4760762635515, 479.9521581597099, 485.9335962486961, 490.9154406183068, 489.99318181940527, 496.6344693773029, 493.4303778107292, 493.7882905831196, 491.8908616347711, 491.9197685718013, 492.5347844020666, 492.9882101976851, 494.5485228475362, 497.9363268708751, 489.9475103492277, 491.9563995847947, 487.6896735969227, 480.59623084313864, 472.70227665081353, 445.16597293048267], [466.71143369550134, 468.232971067436, 469.64344418374924, 474.79193906194547, 477.1568506545535, 478.5764127599255, 478.0388189884161, 476.9260671767964, 472.4510930770561, 468.63377048147623, 470.0981870704265, 469.745155286425, 468.196971810956, 467.02658687923423, 468.06502738086533, 470.4715668798683, 475.2317743523021, 474.66773598597064, 479.58934885379097, 481.4421797931937, 479.61578448161447, 475.9215099296996, 477.496033760381, 482.87276069812253, 482.79104557371505, 481.76845470827504, 483.329313476707, 482.49220274370447, 480.77529714203183, 477.86825365476835, 467.7024761670847, 457.15366531603877, 427.06438120968147], [448.74154498189966, 447.7141586718491, 448.67986211681006, 451.44830134747974, 454.40107253021745, 457.2532251539546, 458.5147156559549, 458.3036628094219, 454.1983148072107, 455.6087010305314, 450.76655074301397, 453.90288623349863, 450.61435575194184, 449.7007215561728, 451.98463699177404, 452.1399231813206, 460.774546040786, 463.73877262288937, 469.84375478927734, 473.05706891565404, 472.08593968867797, 472.12579749548934, 471.07063663200563, 476.1497961795716, 481.2418449552413, 482.3036102971084, 482.20194345182915, 479.35597779631865, 477.81921746302976, 480.7152614863499, 468.31143499735543, 459.3073037634009, 421.75464999399793], [448.7361111111111, 394.57653985507244, 371.08782290658127, 362.3502268894274, 368.24362663951683, 389.84375046484206, 377.45414729520724, 361.4156405557206, 366.44981443755773, 396.41743262440787, 348.95506589424525, 379.60530444433897, 368.5645445945658, 361.1716427005839, 365.4185995515632, 347.7272590265914, 376.8508796600521, 390.81989758155976, 386.61887143340124, 390.2489782270501, 403.78695571472554, 389.3222171478388, 393.58002965258765, 407.5353764835723, 408.22047878881375, 415.55242035578726, 408.3223964124904, 420.2479834360863, 409.0396340514467, 409.935385270323, 402.55228292676196, 395.335378037963, 369.79646045294027], [448.05204741577705, 448.58750275350394, 452.3344292827575, 451.2655547586511, 456.0710118142149, 459.09314004669216, 458.6221506730765, 454.81111927731223, 450.7118761136564, 453.20295677310867, 453.184749090529, 451.18508557827266, 448.75827542278347, 446.5188304473985, 448.7161883159904, 453.9663445025256, 452.9228569315017, 460.74701059774924, 467.18499955281493, 470.9139325861499, 468.9904032116645, 466.88942037057814, 465.88575089894505, 468.38660518459324, 472.8084712202426, 473.8043626844337, 476.4389004665917, 473.6011817030899, 471.352033138847, 467.6660314881632, 461.6553978493683, 448.8069507417291, 413.9812565102363], [446.8729891829762, 446.6940422544749, 444.45374257608324, 450.47091834849846, 452.1774439027803, 452.42058925731635, 446.54296026278564, 449.36853908852436, 443.7584651057075, 442.39480788043767, 442.41329158369984, 440.9989948248491, 439.57625393904453, 440.77820295135956, 444.1898393474655, 441.56109167906766, 444.15340175548744, 449.5482535243796, 460.0741814079702, 459.4344819733285, 459.68396130504146, 454.7508350448353, 461.21429204352876, 462.27829605848785, 465.6128510384682, 466.4142930880295, 471.2504841909903, 465.37403445832996, 460.3088060913746, 461.8539026911109, 455.761796742324, 440.61176516507123, 402.79216115066185], [446.453621802513, 443.67920434078917, 443.95470497404017, 444.95339057095737, 445.3993010605229, 452.0219722733193, 446.6234542703013, 447.60646555560703, 442.3728900419802, 443.7083078052667, 442.52052570085766, 438.7029982243036, 439.1902385892968, 435.307451165762, 434.10832070590254, 436.24919027194574, 443.2477612036376, 444.1642597059668, 452.71533938232704, 456.4100402136638, 458.55095609734934, 455.7694698629036, 455.32176799014263, 461.9249049105883, 471.7858426016147, 463.8300063117557, 469.2614699356884, 466.4965118690526, 462.8718634807913, 460.98688868977587, 452.9040997942383, 441.8925258453163, 401.0059160776056], [442.1029962088625, 446.399652407906, 444.6181005286199, 449.9390143506956, 456.13173392146234, 457.5525442005064, 460.33748808625245, 459.2453494741044, 453.3038270722959, 452.9925456833257, 455.5307026728499, 454.24349958568513, 453.43335506358335, 446.2434937765095, 447.8694982964062, 449.8951549019542, 460.7260214883562, 457.2883131207324, 465.1751421544846, 469.37373687037257, 465.16446458758077, 468.81958729236277, 467.20225956329364, 469.8314600377224, 472.6930225552075, 477.8526851602674, 483.23207606246496, 475.3798920642312, 475.5356881443821, 469.8694432191045, 463.2032995342997, 451.6050192301556, 414.8234383215887], [438.99508308525765, 446.1494327601369, 445.1921969963452, 447.8271923893116, 448.9403886057211, 458.01930200530103, 454.1049358758361, 450.43986793239003, 446.22715364065715, 449.3431315643811, 454.05482523011557, 450.24645841889844, 448.37324188143464, 445.6527104138605, 448.9426887577324, 450.80061722424125, 454.8133518168809, 458.16916453200025, 464.12001398670844, 464.28181626759346, 465.02123911051984, 463.16863948646784, 462.84634148483804, 470.33366808681967, 473.6562232537106, 471.73846097761054, 472.0502293100435, 468.086643428292, 470.6446318163481, 466.84975508330535, 458.8943014275097, 445.6256859119878, 415.1417227316838], [418.72234340687504, 416.7212273615628, 416.125140690908, 421.1539180640837, 415.03769565186025, 417.4450972858416, 412.9939803664388, 409.59788150550224, 407.33977367902617, 401.38278186718594, 407.29895749378073, 407.15419617569546, 399.3027279160683, 396.4800949197701, 392.1155261413869, 399.8377915596515, 404.7332392589906, 399.99926669813146, 407.3027457057084, 412.6541895438091, 415.07247737927867, 417.0863839454542, 416.82873994804424, 423.79081245720573, 429.4748338863371, 426.59632151956043, 431.14954224319774, 433.38091363130127, 431.7591871686052, 429.93336193286893, 427.7521822758957, 412.68653609109094, 375.90028716361684], [413.1162700426978, 414.8269388981765, 420.40002933062516, 418.3431097636701, 425.36021740938673, 425.60115429806916, 432.304197775696, 426.4372587037627, 426.9957193688124, 429.8460766370281, 428.8648140082583, 426.5251807383376, 433.7267971776064, 427.14955445165975, 425.94252796167206, 426.20578499799615, 430.80500604791524, 438.0849045507532, 446.605425276336, 450.3850661250224, 449.5792362587175, 443.0349755075221, 448.85289649248347, 451.8292705921524, 456.40500045778447, 457.2227508697947, 459.75154944105157, 452.7655607761698, 451.2399148999676, 449.8406804465532, 439.3917159666722, 433.8644023715316, 398.2806639275281], [412.7116715799491, 413.93109261148896, 414.513589365328, 420.9500268211372, 422.4512927192472, 431.0870220745325, 434.28376140994465, 430.46135137931645, 431.3463514753279, 433.1358811119272, 437.01846816887473, 433.0954107310365, 430.88517638650825, 433.4371169223978, 433.89029120952824, 433.62381677308497, 441.59866318475093, 439.4771558400889, 450.5193725211148, 452.75143832219004, 452.44243923992616, 450.312200533821, 454.42894494531555, 456.6242747882862, 458.9997183368914, 461.1975396754879, 466.6283019898338, 459.2812216213399, 460.6447096071516, 460.1704602503342, 452.02669637076906, 438.1629146543453, 403.5524440775308], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 334.7076490719993, 402.91688402492787, 340.0397301365368, 474.5362603346474, 313.7866114097968, 417.89242408097004, 345.0263005199147, 387.8213937132828, 351.5015260702506, 397.1174359287651, 412.17601444955426, 418.5055794165992, 353.6680161904402, 288.6516828470491, 231.31267621780609], [401.93881160189517, 385.76723957946615, 383.3725701583856, 390.41932211071423, 400.89230812463455, 400.6040577872001, 391.0636131359442, 386.6012986406287, 389.9163031413902, 396.87041516082695, 390.4864593431249, 398.3324819141634, 396.50939405813403, 379.90141932247514, 381.1006357737488, 383.87868871851157, 393.2276344211093, 393.5568392833847, 403.5836381726509, 400.9072963065271, 403.973699097196, 402.0819553637446, 406.2193675920941, 412.34164446314793, 415.12064158002926, 420.97890223775437, 419.50711853526417, 415.19232009176847, 419.57334992580775, 415.37992606749384, 414.70646368118713, 398.19066649726807, 361.63039976485663], [null, null, null, null, 313.7850678733032, 424.57770833333336, 323.56264134360885, 341.94165620344575, 323.62646933120055, 355.26552530878035, 367.1705270012671, 387.21374182117205, 392.7545086606285, 388.72940537145814, 398.10251099897425, 377.9253611393516, 385.50610089552725, 389.8683938328583, 389.73276471960736, 402.4800869120269, 394.80377646584463, 388.85063053539, 379.62696321868003, 387.09686282425224, 405.3512630842921, 391.38496063312266, 395.0042632157516, 394.0252630858059, 395.65273748263303, 393.54100069142197, 395.4676605527624, 375.40392624649274, 356.39773556790857], [399.6659795169219, 400.06814838291945, 402.69839673351225, 407.7366677690262, 417.0004406828314, 415.9120966237761, 418.0991102756754, 412.1634197094194, 410.23890841264625, 413.9070130104069, 421.1841404484309, 416.9746972634474, 412.2315606665245, 416.2161183420512, 415.33830388850254, 414.5974343430432, 417.3008668580146, 423.30181426761584, 429.87326538193514, 429.8270127263084, 436.5130759667921, 432.2797886539957, 436.1920919629865, 442.2525462617336, 442.61997171474127, 446.2244952824492, 445.2913101520717, 444.76762774380944, 443.11200965345375, 443.8733176813705, 435.20868407735173, 419.13519466692145, 385.38860201859785], [396.15656565656565, 375.52722400740305, 409.0776310524209, 355.29581622341084, 378.3117146280829, 374.3637057059726, 347.09509543880387, 345.20886279815255, 374.4386736169566, 347.9397815451846, 370.67204436174063, 350.77644853940757, 356.45738217739887, 354.10517561246076, 357.4627494612578, 358.7246109118115, 378.4706900640977, 373.2131102301918, 380.7219596754408, 383.5642617473612, 388.56825004545846, 383.5549680179653, 390.4317606531635, 396.2842250293257, 403.92136438408954, 410.4827444992195, 416.3629008281662, 413.8032846937093, 416.01130051784247, 416.77539053569126, 408.7433130336858, 396.6291373777999, 360.91935384408697], [394.85903749950506, 384.4559845962461, 391.26711466830375, 391.56642153623386, 389.72342218902276, 397.6904628184796, 392.5996768824968, 385.2161997984231, 393.75059828307974, 394.10346120308265, 389.5609221063195, 386.76656044208676, 381.5977120735276, 392.7700249815567, 385.12449738930707, 390.25130573516225, 402.1379108177985, 401.8368709626364, 407.995756011269, 402.89100572393124, 405.0994656192697, 406.8318730180361, 411.2197627547523, 414.2450722512399, 423.8466419085613, 425.7075995331858, 426.25460325544714, 426.644451100701, 417.371518285059, 422.43078090384444, 414.47391341471575, 401.75459860137755, 364.2112286204073], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], [389.2221638655462, 428.4653543214664, 407.66150318979265, 406.18866214661676, 405.99738944760986, 390.6536071408864, 375.44649225351856, 385.12920069869904, 356.7081678998088, 350.27970295493054, 365.4327250813683, 357.6095197306663, 350.85616544956656, 374.7483339105164, 376.10070232620427, 354.3662483633627, 336.5796865357602, 358.41475000732805, 361.9679090545245, 362.8063527289361, 360.94541393124473, 366.42625804513614, 374.2796804397482, 376.0315361312274, 381.9649983104747, 387.3465142486688, 384.0033226471871, 386.78438684225074, 376.1284572809462, 374.3485093128961, 373.4751039053003, 358.5742480474642, 305.2071762800179], [386.88972431077696, 374.17391304347825, 386.7675627240144, 354.1838980426602, 374.62811111111114, 343.16926450259785, 310.7269636015326, 302.7137279123094, 389.44037433155086, 363.4403199346843, 338.15539787393413, 318.90357698541015, 356.9044596206444, 349.955711253398, 344.9109088649578, 343.42283245796034, 345.76148802053797, 359.4651853375687, 366.33184020557593, 364.5463436655253, 348.36718940785806, 304.4907057040855, 346.6958225020414, 341.5841231727758, 357.8632766948501, 371.870999640495, 353.6805225723548, 367.22311114908075, 383.08637230046793, 366.8285079604159, 380.6750808050075, 398.26467877061765, 351.78712179965646], [384.8470569888966, 376.51211657657996, 384.7150630650367, 377.61599552181315, 390.21414023512364, 409.039604571354, 398.1620518015545, 396.79826030486356, 397.2325019787985, 408.5143787585827, 403.1605651578511, 402.85494019257527, 406.28999677642355, 405.9605843564412, 415.0718737091577, 417.23928130856143, 423.35296958504307, 431.388668572691, 436.0068465302201, 441.54343248588447, 441.0977988095541, 441.2285540957123, 439.0556852688983, 453.5334799505113, 452.65551417849935, 451.4986652334612, 458.68342232444826, 455.49975394195263, 454.8584881135202, 454.63327147473524, 446.17069744483837, 429.11220005952384, 392.99968747782657], [383.76862616310893, 366.66944540754616, 355.6503472222222, 335.3866674413959, 305.30712783365715, 333.19312398576847, 361.12214968527906, 379.09283180834126, 394.4230739498207, 407.0808982757686, 420.05435738426934, 421.66487007901475, 419.3036997984396, 425.61754727323876, 423.9718963144305, 431.20729834608665, 442.23674203473666, 445.1677807015322, 455.57879930354034, 458.681670761613, 457.4260989843409, 456.50230878155566, 459.6046849862482, 461.30425165606425, 467.79469495348974, 470.575525812055, 473.39333381944704, 469.71149147880334, 467.8989523994477, 468.59395325496456, 455.1408383545508, 447.196194967177, 411.263361487776], [381.8646256700976, 401.50507970760765, 405.2897750770789, 403.5770855553464, 385.8674997836123, 385.1042728869968, 374.84767225313607, 380.5269998670675, 386.8790775282162, 404.57729826351704, 398.3081156414062, 383.1538829753704, 378.7119537933258, 374.5360984113845, 368.84181242664755, 384.9934803795622, 389.2616974637475, 381.106767448152, 369.8909341289753, 387.06047434984725, 384.69884294434223, 383.92634567518724, 388.372677098689, 388.1219392325124, 381.87804999978897, 386.43769856642444, 377.9660458186294, 395.3181695025559, 390.34629757210854, 397.83480707484927, 393.61271902201463, 371.9383402128205, 312.58883040170133], [380.2410128169813, 386.27620221016616, 396.9776856665929, 387.26510160487817, 397.40516157594413, 398.5647155804256, 386.5931018480463, 384.0144183009991, 391.1932892047218, 399.01154604344464, 394.3816301497469, 388.17117555917383, 390.4846442980274, 394.64271110836285, 400.29936675996424, 401.0390673587202, 406.74769362516486, 408.75145070181617, 415.5967717292121, 426.6777744718766, 427.74627214398805, 424.29735872014874, 426.7496702948202, 437.3687696531648, 438.5852998454755, 442.3618123447753, 447.74260173961125, 448.34585505869296, 441.18301574364284, 439.282893015594, 432.260175359069, 421.2572052535819, 379.3195983428586], [378.66234827264236, 357.1722619047619, 332.73037037037034, 245.18096827530786, 335.20253980518254, 306.4278122115979, 313.09703479075785, 339.7077515168056, 312.39202149202106, 349.423456341755, 333.5385179588489, 332.05296667936534, 362.9204450907519, 355.49956485732736, 344.41106696873874, 348.83156327096407, 332.4009101404466, 338.26045377652645, 359.50580735607394, 346.7913575936685, 358.5579886982311, 355.23207307270036, 372.94917646828424, 379.91463610818954, 371.06244456555413, 377.5044338145015, 388.95997895041637, 380.88167862949484, 388.53228326027687, 383.4959769764603, 373.9291151964777, 364.09111787710617, 309.23899931363496], [378.5403073308011, 386.0705881672804, 397.89521318744465, 374.75290116665366, 383.8841703720834, 391.32113635598665, 388.0119800513733, 402.2763836573756, 407.6668765006597, 405.23143139033897, 404.4864911432075, 408.9869431279317, 398.89200379247774, 404.3624213500753, 406.4213669429119, 403.22256315696166, 411.7228908058647, 420.9879408351606, 418.8257989723538, 429.2101999070424, 429.04056557530913, 421.23878547548617, 432.6356960290122, 437.1331041321453, 438.3802650633345, 441.60505730237975, 442.5973370971294, 443.3398488712577, 439.99950474729746, 438.3680074784984, 432.2336871383758, 420.6744059723525, 380.4020461374032], [377.5589005763932, 401.98157374127004, 389.1666482318948, 401.1681842597282, 391.3785954899733, 407.7140802018624, 403.8064012867905, 401.47599062375133, 409.0061929376575, 416.2104002056071, 415.76574897525643, 416.42348082019583, 412.18871195699177, 423.72790024942344, 423.9155644181037, 424.1698737365253, 433.14432171415245, 435.04189913220773, 441.2078165494217, 448.16052852706156, 451.2642866436529, 451.0781275379132, 449.69718415290885, 457.04862882244527, 462.6255305010086, 462.17824434074964, 465.2764534996551, 462.01017383025487, 460.07845230678066, 461.17806186563, 453.44116455514893, 442.0805887004748, 404.96436725915277], [377.22727272727275, 375.22234299516913, 393.2553475935829, 360.5405778925826, 347.21233567640894, 386.15423432142177, 379.3146331738437, 418.55041109616656, 387.7214345387277, 349.57866379310343, 363.9857452032674, 391.0834489100146, 372.13539899486454, 404.28899214773264, 370.6831337349486, 386.36165777133675, 381.89772929716406, 384.15467760359957, 389.03298942620296, 383.169052802602, 371.7107413419753, 381.4615207421327, 375.11052820564754, 384.0600885195059, 392.93428862063485, 401.2626125911839, 399.07898984699244, 404.8711824552158, 397.26718454193633, 404.3153743931165, 394.19328366952635, 393.6230021498441, 355.52012734210024], [376.2783179437118, 385.53735403185317, 382.5799357509965, 386.25383507596723, 387.43621363693114, 385.28731984857194, 388.73097232882947, 377.07830689036473, 389.07270654142087, 395.72562613883093, 391.88821139920424, 392.59652708942644, 395.0274038517167, 401.78381004007434, 398.30227148272525, 400.8577468301451, 410.7098596369301, 412.0831020183195, 420.94762001092965, 423.2403896206226, 428.91536162842664, 423.29147800111093, 429.83259671891943, 429.4927245489285, 436.6391682809105, 437.62531602667, 439.83154771878316, 437.2770314504899, 434.86662276841633, 435.3834002704308, 424.2443596899434, 414.84825554626866, 375.6463948291116], [375.6159807144607, 386.1337144409328, 385.0947726171114, 367.42455417771356, 366.39677944755783, 362.5843740362588, 354.1416839180308, 341.1505554382855, 354.3175179239888, 364.09079719927, 369.45451246594325, 358.479081536088, 368.9902977532952, 369.20809007936674, 377.4974422966624, 380.40302902541686, 384.4155654416499, 387.7342661941933, 391.1044762296208, 405.4003675044634, 408.66697108973676, 407.85900411048306, 409.35952775651475, 421.9160400095089, 429.9696812945222, 432.5948032236237, 439.36086507767374, 437.7858598709768, 437.2161944677058, 438.25769830402555, 430.66869850763976, 422.50096185591156, 381.7095765706839], [null, null, null, null, 353.92838761011654, 395.61585664335666, 367.2211417684946, 373.10115106056753, 388.8719473208828, 380.24044919285456, 367.17149375992085, 340.69735533933266, 356.50246571021114, 353.81634962710694, 361.2195676618258, 368.5740906245729, 361.17573701486754, 367.32474502180656, 386.53940942762176, 389.1712757843925, 393.80581071327776, 394.754447603223, 388.6319913386355, 402.1042926050498, 409.37445294617686, 416.0303597468753, 419.8025533345966, 413.01571952397745, 413.2103642751547, 414.2924866622912, 402.54522445345793, 395.1190182663022, 356.79282758042865], [null, null, null, 368.3126370267035, 269.1621621621622, 318.6650191858525, 308.03778231498285, 362.920378442959, 356.45076328260484, 370.2719058618333, 342.8808002417048, 355.4850569863573, 349.73391139241346, 347.1902789355888, 362.819233445679, 340.99355628898184, 327.76762384681314, 346.22789610116627, 344.376469268352, 359.5060217137529, 364.74272714237264, 343.71217775311965, 358.21720285036406, 361.1512108525356, 378.77610281075135, 377.9157542989394, 372.80962223590427, 375.2338842779625, 372.82164889776374, 381.1127410861484, 366.96346380079916, 367.54389071680055, 340.04858901943203], [372.78429245880164, 393.2662642717906, 369.3406791779074, 387.6372346909642, 400.0133603347604, 391.50154854232636, 396.85733997247144, 378.2339368723046, 383.3863355118014, 388.7670746435208, 365.9938666338106, 382.8269056762167, 382.8835718563822, 381.6001264979262, 374.95303204721495, 379.64855772584104, 391.65382119380894, 392.2191549729825, 399.502328701051, 406.70470780109093, 411.72902301106745, 404.17309054861823, 413.75557222580323, 422.3696479660915, 429.3618796477248, 429.340338457915, 431.9751844074702, 431.2735553549368, 426.9162004619234, 434.0383469789845, 420.3933368973201, 409.3566669628876, 373.81092104524845], [359.1208963727934, 367.7866785260348, 343.74559844065766, 360.5665197541799, 385.5567463944946, 372.02818331482183, 355.57887341214513, 361.73039343774843, 362.31290417271697, 358.7277129897109, 365.41950381775007, 353.19560425208374, 353.9044528738113, 365.1000906449793, 377.30088927166156, 375.284137422722, 369.0200713652324, 392.6061886851672, 387.0139030376712, 397.2677059260446, 389.73724235417825, 388.5871369022514, 392.58829858753023, 409.995221181732, 422.58465312123764, 414.68792594965754, 423.1003923273575, 428.59772044704675, 418.93932570252133, 422.06507676211106, 408.7335313105896, 405.77139893227707, 357.9346039474101], [358.1594042226549, 378.0022506528235, 353.36954789665174, 361.18146140600356, 402.2828367923411, 390.633994224214, 399.13249015499434, 386.7327604983998, 383.76411172327414, 395.406813564111, 397.4572364576, 398.7320678386942, 401.220722501274, 394.30355510917303, 400.5438713452025, 403.6649681202542, 414.47281552879355, 422.277741016885, 434.50127401388136, 445.5082221553873, 447.94928441095345, 440.12129722841996, 452.20806914063803, 464.09803187060544, 465.9725104694378, 469.028373654648, 471.46487896530704, 466.5358012595935, 465.9646554222576, 464.3565273608508, 454.1610751957798, 444.8537542697466, 401.54182862638385], [353.2682514227802, 374.65507051668277, 364.554105383405, 361.60704416370754, 354.12086204885776, 350.55337848005104, 361.5526271030614, 373.2039859302775, 355.64125313992145, 371.95643215061256, 380.36590519543836, 378.64463348320487, 362.97778800483036, 381.948137298959, 384.58398391898714, 394.19094568075127, 394.64092276058875, 391.65665293213806, 404.4086931921787, 405.2534556533153, 407.4717296761487, 409.1609473244369, 414.9169603202867, 422.474497463283, 430.8946966954285, 428.88413456277584, 432.204924713857, 432.3164147104013, 431.72054352463834, 431.40795285895666, 427.70084709911214, 417.45658586534483, 381.6721418140155], [353.22449796293483, 380.66287015505486, 389.228897774561, 373.2234242116113, 393.7435050769551, 398.9318064728671, 372.6149273507272, 396.56264512127717, 352.175784764826, 349.634215233, 365.5198637450789, 374.07711362486253, 368.90559042783855, 362.92543309885195, 357.42405563299195, 359.6838209716872, 369.6161660071912, 373.758179829878, 375.8196102107776, 395.3541724042664, 400.4937338426665, 393.1820683379354, 405.93625350835134, 408.24414828845113, 419.2055584870737, 425.7876416820021, 429.3355021360228, 425.7287510150154, 426.11798546080536, 424.9186056152136, 418.5982191980035, 405.3158223703641, 361.17753296774555], [352.896511246393, 347.0114089149657, 294.995222094214, 301.0855911330049, 385.14496517094085, 337.8387190771649, 336.98187035369943, 300.2620116817141, 325.5953463354258, 360.73052850389007, 359.3194667248209, 348.56998710145035, 336.8136491988262, 343.79196151718986, 328.6381383768583, 333.138061773079, 327.8971151910495, 339.7373173659255, 357.8151457232229, 360.04563564465286, 370.7518386725471, 357.29948884229384, 351.06619530588875, 385.1031054298694, 377.8053642185518, 390.2424103598367, 383.96260859097623, 376.1241287828505, 377.4600696671832, 375.4402011544971, 373.95436158581316, 363.52723695331883, 327.0447048139962], [352.76689943245594, 359.4673774783656, 361.8892665777408, 372.44712250451926, 379.8367765482815, 388.195978457395, 384.3507132088615, 392.65857003219276, 392.0375702194027, 396.8019484885365, 391.37249103826974, 389.8220132007049, 393.80936394142213, 395.91300265535335, 400.25139543412575, 396.3558659166845, 406.14740474996006, 412.2161654729219, 419.2278279126653, 422.36756062622266, 430.7561964538242, 427.63113938684586, 430.83861027839237, 434.49779797362424, 440.3321084157158, 439.3340280749639, 439.73289500969867, 440.61129379359625, 440.8528427183958, 439.53553274222213, 431.4992184556451, 418.02099836809737, 382.04681818079564], [352.7149230173309, 351.3728504276986, 376.73732152959343, 348.06548569253005, 352.5488103733964, 333.14204566094463, 336.06878506884107, 346.6477011813567, 333.70474225476266, 343.3550841257469, 329.826169111504, 373.1151341204463, 357.60253733375015, 328.88899541892835, 345.6026563470982, 324.64834630098755, 344.4928236252999, 350.5880755567579, 353.5032507891412, 341.683476180975, 350.1885306873059, 354.6777315001844, 353.39500160174356, 362.3335875455985, 368.7620737631216, 390.8156208861856, 379.92155982385935, 377.20676262619685, 356.23813181046046, 361.7443582407074, 374.33489026516037, 362.7017492164758, 351.87405624359155], [352.5096509242952, 379.88440142630384, 361.43482104620597, 361.6215803578061, 388.2971775979727, 391.78800906073894, 365.56047499100697, 360.3138226343215, 363.02123646910866, 363.2871177365896, 354.1470437415392, 359.6353978930033, 355.26223012044, 355.71486262174335, 358.91040588098457, 343.25596599050397, 351.84710044367125, 375.3572956319493, 376.9570024045358, 391.13988363369515, 387.0286909587274, 384.8339784787907, 390.5534672077911, 392.06818408037987, 384.60528855902163, 380.8857137733189, 375.5392809991938, 390.6946679815617, 379.0966953094511, 371.292222418458, 372.02428979032703, 358.78934554750754, 336.8405161430515], [350.92347642295783, 369.9593372319688, 355.8730764150724, 429.6296025656639, 369.6619839768555, 334.19133192389006, 336.8416684196735, 348.6882675027106, 331.4704551678115, 308.34959398169775, 308.4476612350366, 280.71875, 372.52352958404424, 341.8948339684766, 340.92188570965016, 296.083097557496, 313.88774370123355, 349.10321570826034, 364.25747987288275, 322.5695161396085, 364.4846385465743, 348.9715790791039, 371.79244209281643, 378.83626219982744, 369.5594533236119, 380.6545460042857, 357.18379100100634, 368.01017057133913, 357.5850600336235, 382.6570214637093, 365.187228973768, 363.9447404559426, 343.9577900033486], [348.69727563237103, 342.58783563059063, 360.46191853824575, 354.1352861212238, 360.20527553943697, 356.56137632855814, 354.63981802375315, 356.98047332448283, 348.80580189942185, 361.56726964750715, 357.2195737426414, 355.72138131359804, 381.62032600100804, 378.5952226817387, 380.38682703082924, 387.66183543604643, 391.767428627511, 396.2120366598595, 409.69232409981663, 412.7105475954878, 416.5174040258252, 415.38422142875265, 422.23267906001126, 433.1810530901981, 436.8816759921431, 441.5279378827295, 437.6782338771122, 441.1688566568326, 437.1379208378567, 439.8817211208819, 429.7657799918746, 419.6853876805061, 382.6868123246467], [346.38578824883854, 343.1765778445826, 357.01103036757314, 386.15069841656464, 382.39226774142236, 368.1973212854525, 388.01610936648905, 383.68669090595836, 387.7706222256016, 391.26670873954777, 398.12489385848573, 391.97117209892804, 394.7739138612092, 397.8806824398113, 412.9616704594746, 426.15087279807983, 430.15676777873676, 442.04639269918385, 452.08318928197656, 456.64164131484983, 458.6079940352523, 460.67904229385766, 465.03185945104156, 472.61247337233823, 476.93200609903425, 478.568908163204, 484.09570589937084, 477.3925038005709, 478.1705339579409, 477.2669685028799, 468.78187951238607, 457.78660668565806, 430.6589416528687], [340.6808510638298, 361.82185990338166, 376.99936507936513, 378.29166666666663, 287.01650326797386, 345.84129933175336, 314.50696171617557, 361.01083267219013, 343.39443510832444, 361.88268368712636, 364.8865195986492, 385.0656124484645, 360.75049744024255, 351.5264186059242, 341.0186210136713, 354.41215335425943, 367.0942497861774, 369.5487466725093, 374.6682076173683, 375.58806922236295, 380.6317446550809, 381.1050323595027, 390.1775521917893, 388.1637334057091, 388.210199757165, 394.26448912487933, 407.25992697696597, 398.88513680228033, 390.08206128507527, 397.0020690990981, 382.03078449485486, 385.166633309036, 342.2746937757259], [331.6686086716243, 377.1984456123587, 358.10000272331155, 356.2529058383163, 333.97310257031637, 341.9406135920408, 357.9675471168778, 355.289677217429, 319.4425688422795, 327.76114301384195, 382.1239168124037, 346.1942158103805, 319.3239362519511, 355.17265833947533, 352.96898294084536, 350.8826231421039, 350.3863444637845, 360.4435215133268, 358.0816231515045, 356.3723695988921, 362.8972232046812, 361.9255096759492, 374.79746137623124, 384.04778602984976, 385.2867603492421, 397.3126922582165, 381.47403212328277, 386.9080107027996, 385.61027431511457, 389.23945505365936, 387.5551808886926, 379.20120827438575, 332.95362045799834], [320.1857270726746, 357.7935459716625, 331.5373092379777, 363.69237639221774, 359.58676881838505, 377.18224617594996, 382.1256029640283, 380.5866621400237, 391.7770694844063, 399.15889927684253, 393.0562581237237, 405.06961234525903, 401.23638538095634, 413.3745962346172, 416.1062809479232, 425.99089256116514, 442.0608471741366, 446.5370821918288, 461.29603768853866, 469.9851437763081, 473.74528754682217, 471.1870097719307, 476.312072576373, 481.3074126514156, 481.1885222043853, 482.49777471049475, 487.05466486247474, 481.99594861402625, 479.2371303127888, 480.671248146183, 472.3987311624553, 463.2423462873959, 436.4704435388268], [310.70773997837904, 300.16687479966345, 328.31525842319166, 343.4970462025763, 359.6104726174904, 341.35850885488026, 368.1338341435276, 339.30189457854334, 379.67982432258265, 369.0629289525311, 376.54114451949533, 365.74211299628934, 378.9627703000628, 377.52087029884353, 385.541781219709, 387.6367009110246, 393.3000258274667, 390.3340739436785, 400.65114906472945, 405.5305319613713, 405.4698995564312, 410.52992731808354, 417.7224263268967, 419.7017334395894, 424.2565041664232, 431.3567506062411, 432.9840286777243, 433.22623064891883, 432.45749446648426, 431.83760554708067, 426.75657682044124, 412.71888319852377, 378.23488000155936], [null, null, null, 352.9197625767479, 342.06622708424686, 387.1936477122859, 329.5889516687551, 357.7775319019164, 345.93390727258867, 366.3261378608355, 357.8084679350089, 371.84509238089237, 356.9981775747353, 372.1338303273899, 373.05835616134067, 376.90696279061825, 394.2346292040519, 380.9530448735464, 396.0859156184304, 392.691517773353, 403.94829335527726, 404.58137780280805, 396.4671977184242, 408.9787994318208, 414.1570676135115, 418.3353380023113, 420.7016900341763, 420.3406956819593, 418.1503704464168, 415.65132016156275, 412.8161391454449, 403.55209933820424, 363.44018086807836], [279.94400895856654, 323.351266544453, 363.703125, 299.7995463746114, 334.44788718513564, 363.7454262276513, 358.75327158090636, 316.198555213656, 362.42926158689517, 367.72079444113484, 381.3524216848963, 392.9770055101718, 348.1330253744994, 359.9327170671557, 357.73044770624364, 356.2991196550322, 372.5446644725442, 368.50204972113926, 383.1500578959674, 387.9850657662457, 381.58306670141445, 387.78235589630714, 398.0023468166755, 398.7838284243099, 407.2583958997482, 406.2425082614584, 418.8655189736069, 413.52715736214634, 412.8850390991442, 419.68495809183844, 407.8237796680188, 399.5713312761768, 357.0637812658879], [250.0597381342062, 406.6334109730849, 417.7124523636165, 321.36503976035993, 317.99737995036696, 342.7947955390163, 346.28053070550794, 338.1309439361008, 363.27803981804163, 357.964889459882, 376.70754611581816, 351.41565723173477, 364.72849224556444, 350.9733422910988, 357.5496830058497, 371.30689065723124, 369.77956387091274, 383.9962699583591, 377.9322659205952, 387.11922207498316, 397.3595271038472, 397.70521580713466, 388.8364145268979, 389.1676127046762, 401.55412540478665, 394.9717169170706, 400.3708874467579, 408.94997915345533, 398.9115866898857, 411.48834049149093, 399.1093807025051, 382.37548667143903, 346.9235095410881], [null, null, null, null, null, null, 307.0188896887426, 292.28221245421247, 355.9461527556264, 354.47748012517695, 357.77449727682097, 361.26433162790545, 332.318509505078, 341.80531017665675, 365.1945506706576, 378.890970431496, 358.4571427073989, 372.5369655499255, 383.06937612563416, 382.40383821374814, 397.5470662759276, 397.9754003110731, 393.8419776659691, 405.43107956115125, 414.8277922953459, 415.14953859406285, 417.0082656261063, 419.2665920759818, 418.5291568065742, 413.5458360108024, 409.7343903021455, 400.8157191773578, 356.8619564433817], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, 217.24488223640765, 304.95652173913044, 342.6180311031062, 306.95412478300227, 297.4142859688425, 323.6875604440836, 300.84357273445903, 321.1323666412787, 286.25468635612447, 302.65534107108556, 381.7713384152449, 348.3863058816759, 352.7191024960859, 343.94229258364476, 409.2447126087111, 364.85259494581936, 358.1852204015445, 360.70903767315525, 299.50005612018003], [null, null, null, null, null, null, null, null, null, null, null, 193.66666666666666, 187, 347.88781084476165, 357.9001105781461, 292.39949503257026, 308.54192582339675, 284.00337631133885, 289.65524999118486, 333.7268860345191, 315.9607627456809, 317.32942357290324, 345.82800213658186, 348.7262645375617, 368.02805203142174, 345.6905027937541, 358.02308161972127, 334.0171790592063, 354.384957399831, 349.0597521758486, 349.93729711779935, 322.11221083021724, 255.89211585900676], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], [null, null, 389.1223374766573, 383.0238740674254, 391.9889159038902, 361.45500395373455, 294.59965034965035, 382.2465188655796, 383.44904761904763, 357.3233302785924, 359.26727810310143, 384.99672254784576, 358.6085745910601, 370.5539234181072, 366.9768026147373, 358.5191770811415, 372.0350870731483, 379.05237978657215, 388.55020395784, 396.18075810253185, 402.58381365080345, 389.59602764642017, 406.57612231385207, 415.20618265125114, 418.7701934810202, 423.1167093937937, 421.0222451930543, 423.551083134584, 425.28987951541814, 428.1480147940883, 424.29194229377055, 412.26056024058755, 368.4989777529056], [null, null, 349.5595238095238, 427.38888888888886, 316.1450892857143, 339.5843254434559, 283.8016914687967, 324.67120841440027, 247.71477174849264, 372.88309469434955, 249.93592137219187, 369.5420006214491, 364.87491724714704, 344.1821327043526, 366.4463326133461, 343.96873829506404, 353.96359433822334, 362.61348862519156, 375.05838763848385, 385.2871473947481, 382.0240224989061, 382.24826348677556, 388.2693073953516, 387.5778718576033, 392.0714940620952, 399.49399479151344, 387.1463418258259, 393.18809080919857, 383.2139543889145, 394.0311919703857, 392.01209699644744, 380.34491955932515, 339.41201968416294], [null, null, 299.96666666666664, 288.6666666666667, 336.22369554004393, 328.73838424715615, 343.2656930514661, 291.9900837320574, 325.2509758409971, 333.0420233282216, 339.8389606448293, 345.2346388395101, 356.56289342251887, 325.2258791934374, 334.4868200414144, 328.0110834614455, 329.5362385135472, 320.73223557099647, 319.9939493164417, 350.4253153258497, 363.348053288187, 329.1939717825551, 349.48188313227814, 361.0020191899239, 363.9059796450225, 375.31459455924613, 377.5172460942916, 388.2924402770222, 394.1984594670456, 387.1799122787864, 395.1708491768085, 380.8221264034824, 354.3386817723778], [null, null, null, 399.1895975089378, 298.5921055771409, 337.4386457401847, 361.3943873962849, 181.8095238095238, 301.2988558833953, 356.297284732811, 345.80491146539083, 326.7933189454442, 382.9836578699079, 363.0257621737809, 350.92509445875794, 340.05199984387764, 364.6101025148609, 364.8749106240998, 355.1833921629888, 350.310614005524, 367.06033222431705, 371.5866438667334, 380.7463948872931, 388.28417035409285, 387.1506248331151, 390.99451112002697, 398.7148582973443, 393.42265811085497, 395.93905613957713, 394.87935187985306, 384.94403420829366, 374.98903631410155, 335.1101737063627], [null, null, null, null, 291.44117647058823, 351.27619047619044, 356.0328282828283, 276.75, 249.25531914893617, 355.89895061460277, 333.9233825669383, 359.7224471397338, 360.5303113119254, 339.81594129050904, 341.77282043521706, 369.5655872983905, 369.1673746303432, 387.723079846663, 412.42688767376615, 408.34507000365846, 416.84118699367866, 417.3423270560942, 416.79575312988703, 424.9666684094734, 432.61673112196115, 434.0366258062288, 434.44382188628475, 436.937898969362, 433.54286527474653, 432.60483117993255, 425.70239520046937, 415.3529449204316, 378.7533652036525], [null, null, null, null, 251.2856281612075, 218.97315010570824, 261.15169352044353, 237.7860383179532, 253.59756967774044, 252.5168666051126, 265.8570068014021, 263.8719256180733, 273.44910969699606, 272.7218769028297, 263.7233500511119, 289.8036387153605, 278.8846574141271, 286.1546217281591, 295.04046083304706, 306.2029657854137, 332.98218473971735, 326.03898551071575, 310.6038777125419, 331.3665428634111, 361.2485908047942, 331.3295252631941, 338.2198234212247, 373.1526708284031, 307.0237271159644, 343.63371041197314, 318.18873663751276, 318.4884310981277, 242.05596074093992], [null, null, null, null, null, null, 193.61613876319757, 243.4333333333333, 277.21136380222583, 296.5390480182501, 321.13990596238494, 314.1109101659713, 310.3498072177065, 319.4287478020461, 347.0481690209686, 341.47893200553267, 354.79828222133347, 350.81818870570606, 363.3397025549909, 382.4564317746245, 383.2761841614033, 387.0419792493505, 377.0290018625319, 396.86662329108333, 398.52985873380817, 396.5898582454506, 405.40249511113547, 402.5441796866967, 397.28365593132526, 399.0175668788292, 380.5724114418368, 378.3179387781385, 358.0291273104897], [null, null, null, null, null, null, null, 209.98986828774062, 320.55286807705534, 334.9711098897107, 346.9368555410497, 369.21453368421896, 319.7160711449626, 343.9623897033686, 337.6586394496344, 349.69793893674296, 355.36282872410976, 374.64592796844954, 380.4345671167291, 385.2073141418738, 387.7920908252048, 395.47532916321956, 406.674387450673, 410.7651056598498, 401.9378690931176, 406.34202738014415, 403.5691318876952, 409.632534013638, 403.51759048012644, 403.4815149095385, 395.7984467985097, 391.725687223477, 360.5464841097974], [null, null, null, null, null, null, null, null, 396.036231884058, 389.8175332731784, 341.2758928571428, 366.38878446115285, 311.1545634920635, 303.9434239130435, 334.50815427797136, 355.6556340853183, 336.16627969447376, 348.86577895065943, 362.8366646359208, 373.6802257113415, 388.1663043960266, 385.41735018924714, 391.24553997111946, 371.28285266922455, 352.72026821924635, 397.65525699185923, 380.7722554174633, 377.8182252485849, 381.1567105266623, 403.13446231051626, 391.28065595351154, 411.5337366775525, 357.16633790980114], [null, null, null, null, null, 323.9553846153846, 373.84615384615387, 311.71303418803416, 309.07899436090224, 343.17023200241164, 341.5466492970854, 341.34981060468976, 323.7592111592112, 339.6657502907923, 335.4833348159993, 330.3812216015469, 345.7557602044478, 338.66140806566676, 371.8216658598785, 384.3965349936036, 375.5224865337197, 378.39675845657297, 381.33315191762927, 372.97128780193384, 378.6480888747584, 383.6669859553918, 379.62388113992745, 389.6352775746115, 383.6532787426512, 368.03161655450816, 394.31551962521644, 380.21048474782333, 345.5784199130046], [null, null, null, null, null, null, 323.3125, 272.1578947368421, 330.7187535124199, 334.7051282051282, 362.4927777777778, 362.71735221731706, 291.50730253477417, 314.5476587924819, 351.0202173799425, 316.1964458436908, 307.3134610962677, 322.68829763483745, 335.23064490110113, 344.63172618984845, 339.1519212829506, 361.4776542486277, 358.75615881330094, 365.8670602546129, 383.9917967765174, 389.7674000403187, 387.0151208816966, 387.07332214567236, 384.7800797184833, 390.4087360142786, 381.6000046914977, 372.6272728046631, 348.01106845923556], [null, null, null, null, null, null, null, 370.9086434964993, 363.2752709475399, 393.3151922587217, 406.2739577239578, 318.9314664120643, 305.7977712083007, 341.71243805225583, 345.7034830995919, 373.4637203019185, 373.2349793769465, 364.0363327126915, 347.41831898020934, 366.19100254111873, 379.79218860480313, 375.56376875646504, 390.9100545070224, 381.75813376335765, 410.0802583735282, 347.6169843739206, 376.38632780507186, 415.1380217512465, 393.05157225936733, 378.2155750753124, 363.00840489088955, 376.09654321346756, 313.2602622634308], [null, null, null, null, null, null, null, null, null, null, 304.4645321358636, 193.66666666666666, 319.50901098901096, 263.321404109589, 288.0579534258845, 310.4498489186972, 202.62025316455697, 293.37690658032096, 337.50865132301004, 297.82754330972017, 382.7436861139607, 334.22350474017003, 312.026942601256, 348.50576656681005, 374.39089728803947, 380.9135045655607, 333.2422133363089, 383.4228862351544, 399.6723792131426, 403.2566773765627, 371.992588888862, 346.75002589880063, 355.75542569261734], [null, null, null, null, null, null, null, null, null, 194.5, 380.6482352941176, 317.2689812524053, 243.32142857142856, 297.1130830071754, 296.03766570776133, 295.0211284190569, 355.60196861791934, 304.78907910551965, 340.0738636448, 351.1190544031519, 355.82066468963916, 370.8055702836811, 373.74564497508004, 371.6807350613109, 385.8191853016209, 391.92163093959095, 387.02981275689143, 389.70166783869, 388.42980013559276, 389.06149593455746, 392.33100725350596, 378.3648383142346, 349.72452097696555], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, 303.1463709090057, 333.3741425884145, 320.3301469210789, 338.61595756856514, 365.360978953329, 352.058306665142, 353.5349061512941, 381.1074882418916, 370.5929840915429, 376.03396958925987, 403.27171241509427, 397.78811987398615, 394.0437430153305, 390.7283707751788, 397.4161350691355, 395.6076127379068, 394.88898228949614, 385.39117554511245, 360.7753653801895], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 401.8403710425489, 432.3212642430034, 393.3781972103983, 347.979342573298, 375.875030425893, 373.4597933797175, 316.42557672904053, 392.4919285672014, 361.51243794547855, 389.2845732928384, 409.57237146793886, 400.0353203984839, 366.6610222455985, 354.5676250098343, 361.16113072471654, 352.7835245994436, 328.6929526951791]], legend: ['US', 'FR', 'DE', 'GB', 'CH', 'JP', 'IT', 'CA', 'BG', 'NL', 'AT', 'BE', 'AU', 'SE', 'LU', 'DK', 'FI', 'TN', 'LI', 'AE', 'NO', 'MY', 'HU', 'ZW', 'BS', 'VE', 'IL', 'RU', 'EG', 'BR', 'CW', 'NZ', 'ES', 'CL', 'ZA', 'IN', 'VG', 'KY', 'HK', 'RO', 'TW', 'PL', 'MX', 'BM', 'IE', 'PA', 'MC', 'CR', 'SG', 'KR', 'AR', 'TH', 'CN', 'CZ', 'GR', 'PT', 'SK', 'SI', 'UY', 'MU', 'GA', 'TR', 'CY', 'SA', 'IS', 'UA', 'CU', 'HR', 'BB', 'ID', 'LB', 'EE', 'BY', 'GE', 'LV', 'MD', 'AM'], rank: [[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [2, 3, 2, 3, 3, 3, 4, 2, 2, 4, 3, 2, 4, 5, 4, 5, 5, 5, 5, 5, 6, 6, 5, 5, 5, 6, 5, 5, 5, 5, 5, 5, 5], [3, 2, 3, 2, 2, 2, 3, 4, 3, 2, 2, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 2, 2, 4, 4, 3], [4, 5, 4, 4, 4, 4, 2, 3, 4, 3, 4, 4, 3, 3, 3, 4, 3, 3, 4, 3, 3, 3, 2, 3, 3, 3, 4, 3, 4, 3, 2, 3, 4], [5, 4, 5, 5, 5, 5, 5, 6, 6, 6, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 5, 5, 6, 6, 6, 5, 6, 6, 6, 6, 6, 7, 8], [6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 6, 5, 4, 5, 3, 4, 4, 3, 4, 4, 4, 4, 4, 4, 4, 3, 4, 3, 4, 3, 2, 2], [7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 9, 9, 7, 7, 9, 10, 10, 9], [8, 9, 9, 8, 10, 11, 10, 9, 8, 8, 11, 9, 9, 8, 8, 9, 8, 8, 8, 8, 9, 9, 9, 9, 8, 8, 11, 9, 10, 7, 9, 8, 10], [9, 22, 36, 39, 39, 31, 31, 41, 39, 27, 55, 37, 40, 44, 43, 55, 41, 35, 42, 43, 37, 44, 42, 42, 43, 40, 45, 39, 46, 46, 43, 45, 34], [10, 8, 8, 9, 9, 8, 9, 10, 10, 9, 10, 10, 10, 9, 10, 8, 11, 9, 9, 9, 10, 12, 11, 13, 12, 12, 12, 12, 12, 13, 12, 12, 13], [11, 10, 12, 10, 11, 12, 13, 12, 12, 13, 13, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 17, 14, 15, 17, 16, 16, 17, 18, 16, 14, 18, 17], [12, 13, 13, 13, 13, 13, 12, 13, 13, 12, 12, 13, 13, 13, 13, 13, 13, 15, 15, 16, 15, 16, 16, 16, 14, 17, 17, 16, 16, 18, 18, 17, 19], [13, 11, 11, 11, 8, 10, 8, 8, 9, 10, 8, 8, 8, 10, 11, 11, 9, 11, 10, 11, 11, 11, 10, 12, 13, 11, 10, 11, 11, 11, 11, 11, 12], [14, 12, 10, 12, 12, 9, 11, 11, 11, 11, 9, 11, 11, 11, 9, 10, 10, 10, 11, 12, 12, 13, 13, 11, 11, 13, 14, 14, 13, 14, 13, 14, 11], [15, 15, 16, 16, 17, 17, 17, 18, 19, 22, 19, 20, 22, 25, 28, 26, 27, 29, 30, 28, 29, 29, 29, 29, 31, 33, 33, 30, 31, 33, 28, 32, 31], [16, 16, 14, 18, 14, 15, 15, 15, 15, 15, 15, 15, 14, 15, 15, 16, 18, 18, 18, 18, 19, 20, 20, 21, 20, 20, 20, 21, 21, 21, 21, 20, 20], [17, 17, 17, 17, 15, 14, 14, 14, 14, 14, 14, 14, 15, 14, 14, 14, 16, 17, 17, 17, 17, 19, 17, 19, 19, 19, 18, 19, 17, 19, 19, 19, 16], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 71, 34, 71, 8, 72, 34, 75, 61, 73, 52, 44, 39, 73, 75, 75], [18, 27, 32, 25, 20, 21, 23, 25, 27, 25, 30, 24, 24, 33, 32, 34, 33, 31, 32, 37, 35, 37, 37, 37, 38, 37, 40, 41, 36, 42, 36, 43, 38], [null, null, null, null, 55, 16, 55, 50, 59, 53, 41, 31, 28, 30, 27, 38, 37, 37, 38, 36, 42, 45, 55, 55, 45, 55, 52, 54, 54, 57, 47, 59, 49], [19, 21, 21, 19, 16, 18, 16, 17, 16, 17, 16, 17, 17, 18, 19, 21, 21, 22, 22, 22, 22, 23, 22, 22, 22, 22, 23, 23, 22, 22, 22, 26, 22], [20, 35, 18, 46, 36, 38, 48, 49, 38, 59, 38, 56, 53, 49, 51, 46, 40, 48, 46, 51, 45, 52, 47, 47, 46, 43, 43, 43, 41, 40, 40, 44, 40], [21, 29, 25, 24, 27, 24, 22, 26, 23, 30, 31, 32, 33, 29, 30, 29, 28, 28, 29, 35, 34, 34, 33, 36, 34, 35, 35, 35, 40, 36, 37, 39, 36], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], [22, 14, 19, 20, 18, 29, 32, 27, 45, 55, 44, 51, 56, 36, 36, 51, 63, 58, 60, 59, 65, 62, 59, 63, 59, 62, 58, 64, 69, 67, 65, 70, 71], [23, 38, 29, 47, 37, 48, 59, 58, 28, 43, 62, 65, 50, 53, 59, 57, 59, 57, 55, 58, 70, 75, 69, 73, 73, 71, 71, 73, 65, 70, 60, 42, 54], [24, 34, 31, 32, 26, 19, 20, 21, 20, 18, 22, 22, 19, 20, 20, 20, 20, 21, 20, 21, 21, 21, 21, 20, 21, 21, 21, 20, 20, 20, 20, 21, 21], [25, 41, 46, 52, 56, 56, 41, 33, 22, 19, 17, 16, 16, 16, 16, 15, 14, 14, 14, 14, 16, 15, 15, 17, 15, 14, 13, 13, 14, 12, 15, 13, 14], [26, 20, 20, 21, 30, 36, 33, 32, 33, 21, 23, 35, 35, 37, 40, 33, 36, 42, 54, 47, 49, 51, 51, 53, 60, 63, 64, 53, 57, 52, 52, 62, 69], [27, 24, 23, 27, 22, 23, 27, 28, 26, 24, 26, 30, 29, 27, 24, 24, 25, 27, 26, 24, 26, 25, 26, 23, 24, 23, 22, 22, 23, 25, 23, 23, 28], [28, 45, 50, 57, 50, 61, 58, 52, 62, 58, 64, 62, 44, 47, 60, 54, 65, 67, 61, 68, 66, 66, 61, 60, 66, 69, 54, 66, 59, 62, 64, 64, 70], [29, 26, 22, 33, 33, 28, 26, 19, 18, 20, 21, 19, 23, 21, 22, 23, 23, 24, 25, 23, 24, 27, 23, 24, 25, 24, 24, 24, 25, 26, 24, 24, 27], [30, 19, 27, 22, 25, 20, 18, 20, 17, 16, 18, 18, 18, 17, 17, 19, 17, 19, 19, 19, 18, 18, 19, 18, 18, 18, 19, 18, 19, 17, 17, 16, 15], [31, 36, 24, 44, 47, 34, 30, 16, 32, 57, 47, 28, 37, 22, 39, 32, 39, 40, 39, 52, 58, 54, 57, 57, 51, 46, 50, 48, 52, 47, 51, 47, 51], [32, 28, 33, 28, 29, 35, 24, 35, 29, 28, 28, 26, 25, 23, 26, 25, 24, 26, 23, 25, 25, 26, 25, 27, 27, 27, 25, 28, 28, 28, 33, 30, 32], [33, 25, 30, 37, 40, 42, 47, 51, 49, 42, 39, 50, 38, 40, 34, 35, 38, 38, 37, 32, 31, 33, 34, 32, 30, 29, 27, 27, 26, 27, 26, 22, 25], [null, null, null, null, 45, 25, 37, 37, 30, 35, 40, 61, 52, 50, 46, 44, 51, 52, 43, 44, 43, 41, 50, 44, 42, 39, 39, 45, 42, 43, 44, 46, 48], [null, null, null, 36, 60, 60, 60, 39, 46, 38, 58, 53, 57, 55, 45, 60, 68, 63, 67, 61, 61, 69, 65, 69, 62, 68, 68, 70, 70, 64, 68, 63, 61], [34, 23, 37, 26, 21, 27, 21, 34, 36, 34, 42, 36, 31, 32, 37, 36, 35, 33, 34, 30, 30, 36, 32, 31, 32, 31, 32, 33, 33, 29, 34, 35, 33], [35, 40, 49, 43, 31, 39, 45, 40, 44, 48, 45, 54, 55, 41, 35, 40, 48, 32, 41, 38, 44, 46, 43, 39, 35, 42, 36, 34, 37, 37, 41, 36, 44], [36, 32, 47, 42, 19, 30, 19, 24, 34, 29, 25, 23, 21, 28, 23, 22, 22, 23, 21, 20, 20, 22, 18, 14, 16, 15, 15, 15, 15, 15, 16, 15, 18], [37, 37, 38, 41, 44, 46, 39, 36, 48, 37, 35, 38, 43, 31, 31, 28, 30, 34, 31, 33, 32, 32, 31, 30, 29, 32, 31, 32, 32, 32, 29, 28, 26], [38, 30, 26, 34, 23, 22, 35, 22, 50, 56, 43, 39, 39, 43, 52, 45, 46, 47, 50, 40, 39, 42, 38, 41, 36, 34, 34, 36, 34, 35, 35, 37, 39], [39, 47, 54, 54, 32, 53, 51, 59, 57, 47, 49, 57, 59, 58, 68, 63, 67, 64, 63, 60, 59, 65, 67, 56, 64, 58, 59, 69, 68, 66, 63, 66, 67], [40, 43, 40, 35, 35, 32, 28, 23, 24, 26, 29, 29, 27, 26, 25, 27, 26, 25, 24, 26, 23, 24, 24, 25, 23, 26, 26, 26, 24, 24, 25, 27, 24], [41, 46, 35, 50, 46, 57, 53, 48, 54, 60, 65, 40, 48, 64, 58, 66, 61, 60, 65, 70, 69, 67, 66, 68, 68, 57, 62, 68, 73, 72, 62, 67, 53], [42, 31, 41, 40, 28, 26, 38, 43, 42, 44, 54, 49, 54, 46, 47, 58, 57, 45, 49, 42, 48, 50, 46, 49, 57, 66, 67, 58, 67, 68, 66, 69, 63], [43, 39, 45, 14, 38, 55, 52, 47, 55, 66, 67, 68, 36, 59, 63, 70, 70, 61, 57, 73, 62, 68, 62, 61, 67, 67, 70, 72, 72, 63, 69, 65, 59], [44, 49, 42, 48, 41, 44, 46, 45, 51, 46, 53, 52, 32, 34, 33, 30, 34, 30, 28, 27, 28, 30, 27, 26, 26, 25, 28, 25, 27, 23, 27, 25, 23], [45, 48, 44, 29, 34, 40, 25, 29, 31, 32, 24, 27, 26, 24, 21, 17, 19, 16, 16, 15, 14, 14, 12, 10, 10, 10, 8, 10, 9, 10, 8, 9, 7], [46, 42, 34, 31, 59, 47, 57, 42, 53, 45, 46, 33, 45, 51, 62, 50, 49, 50, 52, 55, 54, 56, 48, 52, 53, 53, 46, 51, 58, 53, 58, 50, 60], [47, 33, 43, 45, 52, 50, 43, 46, 61, 65, 32, 58, 64, 48, 53, 52, 58, 56, 62, 62, 64, 63, 58, 58, 56, 50, 60, 63, 61, 59, 56, 55, 65], [48, 44, 51, 38, 43, 37, 29, 31, 25, 23, 27, 21, 20, 19, 18, 18, 15, 13, 12, 10, 8, 10, 8, 8, 9, 7, 7, 8, 8, 8, 7, 6, 6], [49, 51, 52, 51, 42, 51, 36, 53, 37, 39, 37, 45, 34, 35, 29, 31, 32, 36, 33, 31, 33, 31, 28, 33, 33, 30, 30, 31, 30, 31, 30, 31, 30], [null, null, null, 49, 48, 33, 54, 44, 52, 41, 51, 41, 49, 38, 38, 39, 31, 43, 35, 41, 36, 35, 40, 40, 40, 38, 38, 38, 39, 41, 38, 38, 37], [50, 50, 39, 55, 51, 41, 42, 56, 43, 40, 33, 25, 58, 45, 49, 48, 43, 51, 44, 45, 53, 47, 39, 45, 44, 45, 41, 44, 43, 38, 42, 41, 46], [51, 18, 15, 53, 53, 49, 49, 54, 40, 49, 36, 55, 42, 52, 50, 42, 45, 41, 48, 46, 41, 39, 49, 50, 49, 52, 49, 47, 49, 45, 45, 51, 57], [null, null, null, null, null, null, 61, 60, 47, 54, 52, 47, 60, 60, 44, 37, 52, 49, 45, 54, 40, 38, 41, 43, 39, 41, 42, 40, 38, 44, 39, 40, 47], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, 73, 69, 62, 70, 73, 72, 75, 73, 75, 75, 61, 72, 72, 74, 45, 71, 72, 68, 72], [null, null, null, null, null, null, null, null, null, null, null, 71, 71, 54, 48, 72, 71, 74, 75, 71, 74, 74, 70, 71, 69, 74, 69, 75, 74, 74, 74, 73, 73], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], [null, null, 28, 30, 24, 43, 62, 30, 35, 50, 50, 34, 47, 39, 41, 47, 44, 44, 40, 39, 38, 43, 36, 35, 37, 36, 37, 37, 35, 34, 32, 33, 35], [null, null, 48, 15, 54, 52, 63, 55, 68, 36, 70, 42, 41, 56, 42, 56, 56, 55, 51, 48, 52, 53, 52, 54, 52, 47, 55, 56, 64, 56, 54, 53, 62], [null, null, 53, 56, 49, 58, 50, 61, 58, 64, 61, 59, 51, 65, 67, 65, 66, 69, 72, 65, 63, 71, 68, 70, 70, 70, 65, 61, 55, 61, 48, 52, 52], [null, null, null, 23, 57, 54, 40, 67, 64, 51, 57, 63, 30, 42, 55, 61, 50, 53, 64, 66, 60, 60, 54, 51, 54, 56, 51, 55, 53, 55, 57, 60, 64], [null, null, null, null, 58, 45, 44, 62, 67, 52, 63, 48, 46, 62, 61, 43, 47, 39, 27, 29, 27, 28, 30, 28, 28, 28, 29, 29, 29, 30, 31, 29, 29], [null, null, null, null, 61, 62, 64, 65, 66, 68, 69, 69, 69, 70, 72, 73, 73, 73, 74, 74, 73, 72, 74, 74, 72, 75, 74, 71, 75, 75, 75, 74, 74], [null, null, null, null, null, null, 65, 64, 65, 67, 66, 67, 66, 66, 56, 59, 55, 59, 58, 53, 50, 48, 56, 46, 50, 51, 47, 49, 51, 51, 61, 57, 43], [null, null, null, null, null, null, null, 66, 60, 62, 56, 43, 62, 57, 64, 53, 54, 46, 47, 49, 47, 40, 35, 38, 48, 44, 48, 46, 47, 48, 46, 48, 42], [null, null, null, null, null, null, null, null, 21, 33, 60, 44, 65, 68, 66, 49, 64, 62, 59, 56, 46, 49, 44, 66, 74, 49, 61, 67, 66, 50, 55, 34, 45], [null, null, null, null, null, 59, 34, 57, 63, 61, 59, 60, 61, 63, 65, 64, 60, 65, 53, 50, 57, 57, 53, 64, 63, 64, 63, 60, 63, 69, 50, 54, 58], [null, null, null, null, null, null, 56, 63, 56, 63, 48, 46, 68, 67, 54, 67, 72, 68, 70, 69, 72, 64, 64, 67, 58, 59, 57, 62, 62, 58, 59, 61, 56], [null, null, null, null, null, null, null, 38, 41, 31, 20, 64, 67, 61, 57, 41, 42, 54, 66, 57, 55, 58, 45, 59, 41, 73, 66, 42, 56, 65, 70, 58, 68], [null, null, null, null, null, null, null, null, null, null, 68, 70, 63, 71, 71, 68, 74, 72, 69, 75, 51, 70, 73, 72, 65, 65, 75, 65, 48, 49, 67, 72, 50], [null, null, null, null, null, null, null, null, null, 69, 34, 66, 70, 69, 70, 71, 53, 71, 68, 64, 67, 61, 60, 65, 55, 54, 56, 59, 60, 60, 53, 56, 55], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, 69, 62, 69, 66, 56, 63, 68, 55, 63, 62, 47, 48, 53, 57, 50, 54, 49, 49, 41], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 29, 20, 36, 67, 56, 59, 71, 48, 71, 60, 44, 50, 71, 73, 71, 71, 66]], year: [1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019] })

// provide(THEME_KEY, 'dark')

const option = ref<EChartsCoreOption>({
  title: {
    text: '',
    left: 'center',
  },
})
watchEffect(() => {
  const title = ''

  option.value = {
    title: {
      text: title,
      left: 'center',
    },
    tooltip: {
      trigger: 'axis',
      position(pos: any, params: any, el: any, elRect: any, size: any) {
        const obj: any = { top: 30 }
        obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 130
        return obj
      },
      formatter(params: any) {
        params.sort((x: any, y: any) => {
          const xv = x.value[x.encode.y[0]]
          const yv = y.value[y.encode.y[0]]
          if (xv === undefined)
            return -1
          return yv - xv
        })
        let showHtm = ` ${params[0].name}<br>`
        for (let i = 0; i < params.length; i++) {
          if (params[i].data === undefined)
            continue

          const _text = params[i].seriesName
          let _data = params[i].value[params[i].encode.y[0]]
          const _marker = params[i].marker
          if (_data)
            _data = _data.toFixed(2)
          showHtm += `<span style='font-size:12px; float:left'>${_marker}${_text}</span><span style='font-size:12px; float:right'>${_data}</span><br>`
        }
        return showHtm
      },
      // extraCssText: 'width: 170px',
    },
    xAxis: {
      type: 'category',
    },
    yAxis: {
      type: 'value',
    },
    legend: {
      orient: 'vertical',
      type: 'scroll',
      left: 'right',
      data: chartData.value.legend,
    },
    dataset: {
      source: [['year', ...chartData.value.year], ...chartData.value.legend.map((value, index) => { return [value, ...chartData.value.data[index]] })],
    },
    series: [
      ...chartData.value.legend.map((value, index) => {
        return {
          datasetIndex: 0,
          type: 'line',
          name: value,
          seriesLayoutBy: 'row',
          encode: {
            x: 0,
            y: index + 1,
          },
        }
      }),
    ],
  }
})

const mapOption = ref<any>({
  baseOption: {

    timeline: {
      axisType: 'category',
      orient: 'vertical',
      autoPlay: true,
      inverse: true,
      playInterval: 1000,
      left: null,
      right: 0,
      top: 20,
      bottom: 20,
      width: 55,
      height: null,
      symbol: 'none',
      checkpointStyle: {
        borderWidth: 2,
      },
      controlStyle: {
        showNextBtn: false,
        showPrevBtn: false,
      },
      data: [],
    },
    title: {
      text: '',
      left: 'center',
    },
  },
  options: [],
})

onMounted(() => {
  const yearIndex = chartData.value.year.indexOf(2015)

  //  
  const countryValues = chartData.value.data.filter(x => x !== null).map((row) => {
    return row[yearIndex] as number
  })

  mapOption.value.baseOption.title = {
    text: '',
    left: 'center',
  }

  const matrix = chartData.value.data
  let max = -Infinity
  let min = Infinity

  for (let i = 0; i < matrix.length; i++) {
    max = Math.max(max, ...matrix[i].filter(x => x !== null).map(item => item as number))
    min = Math.min(min, ...matrix[i].filter(x => x !== null).map(item => item as number))
  }

  mapOption.value.baseOption.visualMap = {
    left: 'center',
    top: 'bottom',
    itemHeight: 680,
    orient: 'horizontal',
    precision: 4,
    min,
    max,
    inRange: {
      color: [
        '#313695',
        '#4575b4',
        '#74add1',
        '#abd9e9',
        '#e0f3f8',
        '#ffffff',
        '#ffffbf',
        '#fee090',
        '#fdae61',
        '#f46d43',
        '#d73027',
        '#a50026',
      ],
    },
    text: ['High', 'Low'],
    calculable: true,
  }
  mapOption.value.baseOption.series = [
    {
      name: 'World',
      type: 'map',
      roam: true,
      map: 'world',
      projection: {
        project: (point: number[]) => [point[0] / 180 * Math.PI, -Math.log(Math.tan((Math.PI / 2 + point[1] / 180 * Math.PI) / 2))],
        unproject: (point: number[]) => [point[0] * 180 / Math.PI, 2 * 180 / Math.PI * Math.atan(Math.exp(point[1])) - 90],
      },
      data: chartData.value.legend.map((name, index) => {
        return {
          name: countryNameMap.get(name),
          value: countryValues[index],
        }
      }),
    }]

  chartData.value.year.forEach((year, index) => {
    mapOption.value.baseOption.timeline.data.push(year)
    const countryValues = chartData.value.data.filter(x => x !== null).map((row) => {
      return row[index] as number
    })
    mapOption.value.options.push({
      title: {

        text: `${year} ()`,
        left: 'center',
      },
      series: [
        {
          name: 'World',
          type: 'map',
          roam: true,
          map: 'world',
          projection: {
            project: (point: number[]) => [point[0] / 180 * Math.PI, -Math.log(Math.tan((Math.PI / 2 + point[1] / 180 * Math.PI) / 2))],
            unproject: (point: number[]) => [point[0] * 180 / Math.PI, 2 * 180 / Math.PI * Math.atan(Math.exp(point[1])) - 90],
          },
          data: chartData.value.legend.map((name, index) => {
            return {
              name: countryNameMap.get(name),
              value: countryValues[index],
            }
          }),
        }],
    })
  })
})

const tableColumns: any = ref([
  {
    title: 'Country',
    key: 'country',
  },
  {
    title: 'Title',
    key: 'title',
  },
])

const tableData = ref([{ code: 'US', country: 'US', 2022: 100 }])
watchEffect(() => {
  tableColumns.value = [
    {
      title: 'Country',
      key: 'country',
      width: 150,
      render(row: any) {
        return h('div', { class: 'flex' }, [h('div', { i: `flag-${row.code.toLowerCase()}-4x3`, class: 'mt-1 mb-1' }), h('div', { class: 'ml-1' }, row.country)])
      },
    },
    ..._.range(chartData.value.year.slice(-1)[0], chartData.value.year[0] - 1, -1).map((item) => { return { title: item.toString(), key: item.toString() } }),
  ]
  tableData.value = []
  chartData.value.legend.forEach((name, index) => {
    const dataRow: any = { code: name, country: t(`country.${name}`) }
    chartData.value.year.forEach((year, yearIndex) => {
      dataRow[year] = chartData.value.data[index][yearIndex]
    })
    tableData.value.push(dataRow)
  })
})
</script>

<template>
  <n-grid cols="10" x-gap="12" item-responsive responsive="screen">
    <n-gi span="8 m:4 l:3">
      <div class="light-green" h-xs>
        
      </div>
    </n-gi>
    <n-gi span="8 m:6 l:7">
      <n-tabs justify-content="space-evenly" type="line">
        <n-tab-pane name="chap1" tab="">
          <countryBumpCombination :data="chartData" :i18n="true" :year-default="[1995, 2005, 2015]" :value-fixed="0" />
        </n-tab-pane>
        <n-tab-pane name="chap2" tab="">
          <div class="green">
            <VChart
              :option="option" autoresize h-xl
            />
          </div>
        </n-tab-pane>
        <n-tab-pane name="chap3" tab="">
          <VChart
            :option="mapOption" autoresize h-xl
          />
        </n-tab-pane>
        <n-tab-pane name="chap4" tab="">
          <n-data-table
            :columns="tableColumns"
            :data="tableData"
            :pagination="false"
            :bordered="true"
            :max-height="500"
            :scroll-x="3000"
            virtual-scroll
          />
        </n-tab-pane>
      </n-tabs>
    </n-gi>
    <n-gi span="8" />
  </n-grid>
</template>

<style scoped>
.light-green {
  display: flex;
  align-items: center;
  justify-content: center;
  /* height: 200px; */
  /* background-color: rgba(0, 128, 0, 0.12); */
}
.green {
  display: flex;
  align-items: center;
  justify-content: center;
  /* height: 200px; */
  /* background-color: rgba(0, 128, 0, 0.24); */
}
</style>
